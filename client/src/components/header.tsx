import { motion } from "framer-motion";
import { Droplets, Calendar } from "lucide-react";
import { Button } from "@/components/ui/button";
import { SiWhatsapp } from "react-icons/si";

// DÃ©claration TypeScript pour Calendly
declare global {
  interface Window {
    Calendly: {
      initPopupWidget: (options: { url: string }) => void;
    };
  }
}

export default function Header() {
  const openCalendly = () => {
    if (window.Calendly) {
      window.Calendly.initPopupWidget({
        url: 'https://calendly.com/aquagrid/30min'
      });
    }
  };

  const openWhatsApp = () => {
    window.open('https://wa.me/33753482970', '_blank');
  };

  return (
    <motion.header 
      initial={{ opacity: 0, y: -20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ duration: 0.6 }}
      className="bg-white/95 backdrop-blur-sm fixed top-0 left-0 right-0 z-50 border-b border-gray-100"
    >
      <div className="container mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex items-center justify-between h-16 sm:h-20">
          {/* Logo */}
          <div className="flex items-center">
            <svg 
              className="h-6 sm:h-8 md:h-10 w-auto" 
              viewBox="0 13.989999771118164 300.07000732421875 40.8900032043457"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g fill="#000000">
                <path d="M35.01 49.49L28.66 49.49L28.66 40.89L6.35 40.89L6.35 49.49L0 49.49L0 31.98Q0 28.15 1.32 24.93Q2.64 21.70 4.98 19.38Q7.32 17.07 10.52 15.77Q13.72 14.48 17.50 14.48L31.81 14.48Q32.47 14.48 33.06 14.72Q33.64 14.97 34.08 15.41Q34.52 15.84 34.77 16.43Q35.01 17.02 35.01 17.68L35.01 49.49M6.35 34.55L28.66 34.55L28.66 20.83L17.50 20.83Q17.21 20.83 16.27 20.91Q15.33 21.00 14.10 21.34Q12.87 21.68 11.50 22.39Q10.13 23.10 8.98 24.34Q7.84 25.59 7.09 27.45Q6.35 29.32 6.35 31.98L6.35 34.55ZM79.13 35.33Q79.13 37.77 78.48 39.93Q77.83 42.09 76.65 43.85Q75.46 45.61 73.79 46.92Q72.12 48.24 70.07 49.00L77.49 54.88L68.29 54.88L62.18 49.98L55.93 49.98Q52.78 49.98 50.10 48.89Q47.41 47.80 45.46 45.85Q43.51 43.90 42.40 41.21Q41.28 38.53 41.28 35.33L41.28 28.64Q41.28 25.46 42.40 22.77Q43.51 20.07 45.46 18.13Q47.41 16.19 50.10 15.09Q52.78 13.99 55.93 13.99L64.53 13.99Q67.68 13.99 70.35 15.09Q73.02 16.19 74.98 18.13Q76.93 20.07 78.03 22.77Q79.13 25.46 79.13 28.64L79.13 35.33M72.78 28.64Q72.78 26.76 72.18 25.23Q71.58 23.71 70.50 22.62Q69.41 21.53 67.88 20.94Q66.36 20.34 64.53 20.34L55.93 20.34Q54.08 20.34 52.55 20.94Q51.03 21.53 49.93 22.62Q48.83 23.71 48.23 25.23Q47.63 26.76 47.63 28.64L47.63 35.33Q47.63 37.21 48.23 38.73Q48.83 40.26 49.93 41.35Q51.03 42.43 52.55 43.03Q54.08 43.63 55.93 43.63L64.48 43.63Q66.33 43.63 67.86 43.03Q69.38 42.43 70.48 41.35Q71.58 40.26 72.18 38.73Q72.78 37.21 72.78 35.33L72.78 28.64ZM119.70 46.29Q119.70 46.97 119.46 47.56Q119.21 48.14 118.77 48.57Q118.33 49.00 117.75 49.24Q117.16 49.49 116.50 49.49L102.20 49.49Q100.17 49.49 98.10 49.05Q96.02 48.61 94.08 47.69Q92.14 46.78 90.43 45.36Q88.72 43.95 87.44 42.00Q86.16 40.06 85.42 37.56Q84.69 35.06 84.69 31.98L84.69 14.48L91.04 14.48L91.04 31.98Q91.04 34.67 91.78 36.52Q92.53 38.38 93.68 39.62Q94.82 40.87 96.19 41.58Q97.56 42.29 98.79 42.63Q100.02 42.97 100.96 43.05Q101.90 43.14 102.20 43.14L113.35 43.14L113.35 14.48L119.70 14.48L119.70 46.29ZM161.43 49.49L155.08 49.49L155.08 40.89L132.76 40.89L132.76 49.49L126.42 49.49L126.42 31.98Q126.42 28.15 127.73 24.93Q129.05 21.70 131.40 19.38Q133.74 17.07 136.94 15.77Q140.14 14.48 143.92 14.48L158.23 14.48Q158.89 14.48 159.47 14.72Q160.06 14.97 160.50 15.41Q160.94 15.84 161.18 16.43Q161.43 17.02 161.43 17.68L161.43 49.49M132.76 34.55L155.08 34.55L155.08 20.83L143.92 20.83Q143.63 20.83 142.69 20.91Q141.75 21.00 140.52 21.34Q139.28 21.68 137.92 22.39Q136.55 23.10 135.40 24.34Q134.25 25.59 133.51 27.45Q132.76 29.32 132.76 31.98L132.76 34.55ZM203.34 46.29Q203.34 46.97 203.10 47.56Q202.86 48.14 202.43 48.57Q202.00 49.00 201.42 49.24Q200.83 49.49 200.15 49.49L177.25 49.49Q176.37 49.49 175.35 49.28Q174.34 49.07 173.35 48.63Q172.36 48.19 171.46 47.50Q170.56 46.80 169.86 45.81Q169.17 44.82 168.75 43.52Q168.33 42.21 168.33 40.58L168.33 23.39Q168.33 22.51 168.54 21.50Q168.75 20.48 169.19 19.49Q169.63 18.51 170.34 17.60Q171.04 16.70 172.03 16.00Q173.02 15.31 174.32 14.89Q175.61 14.48 177.25 14.48L203.05 14.48L203.05 20.83L177.25 20.83Q176.00 20.83 175.34 21.48Q174.68 22.14 174.68 23.44L174.68 40.58Q174.68 41.80 175.35 42.47Q176.03 43.14 177.25 43.14L197.00 43.14L197.00 35.18L180.10 35.18L180.10 28.78L200.15 28.78Q200.83 28.78 201.42 29.04Q202.00 29.30 202.43 29.74Q202.86 30.18 203.10 30.75Q203.34 31.32 203.34 31.98L203.34 46.29ZM244.95 26.25Q244.95 28.42 244.41 30.13Q243.87 31.84 242.96 33.14Q242.04 34.45 240.84 35.38Q239.65 36.30 238.34 36.90Q237.04 37.50 235.71 37.77Q234.38 38.04 233.20 38.04L246.46 49.49L236.65 49.49L223.41 38.04L218.85 38.04L218.85 31.69L233.20 31.69Q234.40 31.59 235.39 31.19Q236.38 30.79 237.10 30.10Q237.82 29.42 238.21 28.45Q238.60 27.49 238.60 26.25L238.60 22.24Q238.60 21.70 238.46 21.42Q238.33 21.14 238.12 21.01Q237.92 20.87 237.68 20.85Q237.45 20.83 237.26 20.83L216.31 20.83L216.31 49.49L209.96 49.49L209.96 17.68Q209.96 17.02 210.21 16.43Q210.45 15.84 210.88 15.41Q211.30 14.97 211.89 14.72Q212.48 14.48 213.16 14.48L237.26 14.48Q239.38 14.48 240.84 15.25Q242.31 16.02 243.23 17.18Q244.14 18.33 244.54 19.68Q244.95 21.02 244.95 22.19L244.95 26.25ZM257.71 49.49L251.37 49.49L251.37 14.48L257.71 14.48L257.71 49.49ZM300.07 34.84Q300.07 38.04 298.96 40.72Q297.85 43.41 295.90 45.35Q293.95 47.29 291.26 48.39Q288.57 49.49 285.42 49.49L268.29 49.49Q267.60 49.49 267.02 49.24Q266.43 49.00 266.00 48.57Q265.58 48.14 265.33 47.56Q265.09 46.97 265.09 46.29L265.09 17.68Q265.09 17.02 265.33 16.43Q265.58 15.84 266.00 15.41Q266.43 14.97 267.02 14.72Q267.60 14.48 268.29 14.48L285.42 14.48Q288.57 14.48 291.26 15.58Q293.95 16.67 295.90 18.62Q297.85 20.56 298.96 23.25Q300.07 25.95 300.07 29.13L300.07 34.84M293.73 29.13Q293.73 27.27 293.13 25.73Q292.53 24.19 291.43 23.11Q290.33 22.02 288.81 21.42Q287.28 20.83 285.42 20.83L271.44 20.83L271.44 43.14L285.42 43.14Q287.28 43.14 288.81 42.54Q290.33 41.94 291.43 40.86Q292.53 39.77 293.13 38.24Q293.73 36.72 293.73 34.84L293.73 29.13Z"/>
              </g>
            </svg>
          </div>
          
          {/* Contact Buttons */}
          <div className="flex items-center space-x-3">
            {/* WhatsApp Button */}
            <Button
              variant="outline"
              className="hidden sm:flex items-center text-gray-700 hover:text-green-600 hover:bg-green-50 border-2 border-green-500 hover:border-green-600 transition-all duration-200"
              onClick={openWhatsApp}
            >
              <SiWhatsapp className="w-5 h-5 mr-2 text-green-500" />
              <span>WhatsApp</span>
            </Button>
            
            {/* Mobile WhatsApp Icon */}
            <Button
              variant="outline"
              size="icon"
              className="sm:hidden text-gray-700 hover:text-green-600 hover:bg-green-50 border-2 border-green-500 hover:border-green-600 transition-all duration-200"
              onClick={openWhatsApp}
            >
              <SiWhatsapp className="w-6 h-6 text-green-500" />
            </Button>
            
            {/* Calendly Button */}
            <Button
              className="bg-aqua-green hover:bg-aqua-green-dark text-white px-4 sm:px-6 py-2 sm:py-3 font-medium transition-all duration-200 transform hover:scale-105 text-sm sm:text-base"
              onClick={openCalendly}
            >
              <Calendar className="w-4 h-4 mr-2 sm:inline hidden" />
              Prendre RDV
            </Button>
          </div>
        </div>
      </div>
    </motion.header>
  );
}
